@import "./tokens.css";

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: var(--font-sans);
  color: var(--text);
  background: transparent;
}

/* 1) Global, seamless background (fixed) */
body::before {
  content: "";
  position: fixed;
  inset: 0;
  z-index: -2;
  background:
    radial-gradient(900px 640px at 16% 12%, rgba(99, 102, 241, 0.14), transparent 55%),
    radial-gradient(820px 560px at 86% 26%, rgba(168, 85, 247, 0.12), transparent 58%),
    linear-gradient(135deg, var(--bg), var(--bg2));
  background-attachment: fixed;
}

/* Optional ultra-subtle noise (no image assets) */
body::after {
  content: "";
  position: fixed;
  inset: 0;
  z-index: -1;
  opacity: 0.025;
  pointer-events: none;
  background-image:
    repeating-linear-gradient(0deg, rgba(255,255,255,0.55) 0px, rgba(255,255,255,0.55) 1px, transparent 1px, transparent 3px),
    repeating-linear-gradient(90deg, rgba(0,0,0,0.55) 0px, rgba(0,0,0,0.55) 1px, transparent 1px, transparent 4px);
  mix-blend-mode: overlay;
}

a { color: inherit; text-decoration: none; }
button, input { font: inherit; }
::selection { background: rgba(99, 102, 241, 0.26); }

.page {
  min-height: 100%;
  display: flex;
  flex-direction: column;
}

/* More whitespace between sections (2026 SaaS feel) */
.content {
  width: min(1180px, calc(100% - 32px));
  margin: 0 auto;
  padding: 18px 0 72px;
  display: flex;
  flex-direction: column;
  gap: 22px;
}

.section { display: flex; flex-direction: column; gap: 16px; scroll-margin-top: 92px; }
.sectionHeader { display: flex; flex-direction: column; gap: 6px; padding: 0 2px; }
.sectionTitle { margin: 0; font-size: 18px; letter-spacing: 0.2px; }
.sectionSubtitle { margin: 0; color: var(--text2); font-size: 13px; }

/* 2) Matte glass panels */
.panel {
  background: var(--panel-bg);
  border: 1px solid var(--panel-border);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-L3);
  backdrop-filter: blur(12px);
  transition: transform var(--dur) var(--ease), border-color var(--dur) var(--ease),
    box-shadow var(--dur) var(--ease), filter var(--dur) var(--ease);
}

.panel:hover {
  border-color: rgba(255, 255, 255, 0.12);
  transform: translateY(-1px);
  filter: brightness(1.03);
  box-shadow: var(--shadow-L4);
}

.panel--soft { box-shadow: var(--shadow-L2); }

/* Minimal icon button (theme toggle) */
.iconBtn {
  width: 40px;
  height: 40px;
  display: grid;
  place-items: center;
  border-radius: 999px;
  border: 1px solid var(--panel-border);
  background: rgba(255, 255, 255, 0.03);
  color: var(--text);
  cursor: pointer;
  transition: transform var(--dur) var(--ease), background var(--dur) var(--ease), border-color var(--dur) var(--ease);
}
.iconBtn:hover { transform: translateY(-1px); background: rgba(255,255,255,0.06); }
.iconBtn:active { transform: translateY(0px); }
.iconBtnIcon { font-size: 16px; }

/* 5) Navbar – modern, sticky, blur, bottom border */
.topbar {
  position: sticky;
  top: 0;
  z-index: 60;
  margin: 0 auto;
  width: min(1180px, calc(100% - 32px));
  margin-top: 12px;
  padding: 10px 14px;
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  gap: 10px;

  background: rgba(15, 23, 42, 0.42);
  backdrop-filter: blur(14px);
  border: 1px solid rgba(255,255,255,0.08);
  border-bottom-color: rgba(255,255,255,0.10);
  border-radius: var(--radius-lg);
}

:root[data-theme="light"] .topbar {
  background: rgba(255,255,255,0.70);
  border-color: rgba(17,24,39,0.10);
  border-bottom-color: rgba(17,24,39,0.12);
}

.topbarLeft { display: flex; align-items: center; gap: 12px; }
.logoMark {
  width: 40px; height: 40px;
  display: grid; place-items: center;
  border-radius: 14px;
  background: radial-gradient(18px 18px at 30% 30%, rgba(99, 102, 241, 0.32), transparent 60%),
    radial-gradient(18px 18px at 70% 70%, rgba(168, 85, 247, 0.26), transparent 60%),
    rgba(255,255,255,0.03);
  border: 1px solid var(--panel-border);
  font-weight: 800;
  letter-spacing: 0.3px;
}
.logoTitle { font-weight: 800; font-size: 14px; line-height: 1; }
.logoSub { color: var(--text2); font-size: 12px; margin-top: 2px; }

.topnav { display: flex; gap: 12px; justify-content: center; }
.navLink {
  font-size: 13px;
  color: var(--text2);
  padding: 8px 10px;
  border-radius: 999px;
  transition: background var(--dur) var(--ease), color var(--dur) var(--ease);
}
.navLink:hover { background: rgba(255, 255, 255, 0.06); color: var(--text); }

.topbarRight { display: flex; justify-content: flex-end; }

.mono { font-family: var(--font-mono); font-size: 12.5px; letter-spacing: -0.1px; }

/* 6) Hero: softer, less template feel */
.banner {
  position: relative;
  overflow: hidden;
  padding: 0;
  min-height: 252px;
  border-radius: var(--radius-lg);
}
.bannerBg {
  position: absolute; inset: 0;
  background:
    radial-gradient(720px 520px at 18% 20%, rgba(99, 102, 241, 0.22), transparent 60%),
    radial-gradient(820px 560px at 84% 60%, rgba(168, 85, 247, 0.18), transparent 62%);
}
.bannerImage {
  position: absolute; inset: 0;
  width: 100%; height: 100%;
  object-fit: cover;
  opacity: 0.22;
  transform: scale(1.02);
}
.bannerOverlay {
  position: absolute; inset: 0;
  background: linear-gradient(180deg, rgba(0,0,0,0.04), rgba(0,0,0,0.18));
}
:root[data-theme="light"] .bannerOverlay {
  background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(0,0,0,0.06));
}

.bannerInner {
  position: relative;
  padding: 26px 22px 18px;
  display: grid;
  gap: 16px;
}
.bannerTextWrap { display: grid; gap: 10px; }
.bannerTitle { margin: 0; font-size: clamp(30px, 3.2vw, 44px); letter-spacing: -0.9px; }
.bannerSubtitle { margin: 0; max-width: 70ch; color: var(--text2); font-size: 13px; line-height: 1.55; }
.bannerDots { display: flex; gap: 8px; }
.dot {
  width: 10px; height: 10px;
  border-radius: 999px;
  border: 1px solid var(--panel-border);
  background: rgba(255,255,255,0.10);
  cursor: pointer;
  transition: width var(--dur) var(--ease), background var(--dur) var(--ease);
}
.dot--active { width: 26px; background: rgba(99, 102, 241, 0.22); border-color: rgba(99, 102, 241, 0.35); }

.chipRow { display: flex; flex-wrap: wrap; gap: 8px; align-items: center; }
.chip {
  font-size: 12px;
  color: var(--text2);
  border: 1px solid var(--panel-border);
  border-radius: 999px;
  padding: 6px 10px;
  background: rgba(255,255,255,0.03);
}
.chip--accent { color: var(--text); border-color: rgba(99, 102, 241, 0.38); background: rgba(99, 102, 241, 0.14); }
.chip--ok { color: var(--text); border-color: rgba(34, 197, 94, 0.34); background: rgba(34, 197, 94, 0.12); }
.chip--warn { color: var(--text); border-color: rgba(245, 158, 11, 0.34); background: rgba(245, 158, 11, 0.12); }

/* 2) KPI cards: more padding, hierarchy */
.summaryGrid {
  display: grid;
  gap: 14px;
  grid-template-columns: repeat(4, 1fr);
}

.card { padding: 18px 18px 16px; display: grid; gap: 8px; }
.card--tight { padding: 16px; }
.cardTitle { color: var(--text2); font-size: 12px; letter-spacing: 0.25px; }
.cardValue { font-size: 28px; font-weight: 750; letter-spacing: -0.5px; }
.cardHint { color: var(--text2); font-size: 12px; }

/* Charts */
.chartsWrap { display: grid; gap: 14px; }
.chartsGrid { display: grid; gap: 14px; grid-template-columns: repeat(2, 1fr); }
.chartCard { padding: 16px; }
.chartCard--wide { padding: 18px; }
.chartHeader { display: flex; justify-content: space-between; align-items: flex-start; gap: 12px; margin-bottom: 12px; }
.chartTitle { font-weight: 750; font-size: 13.5px; }
.chartHint { color: var(--text2); font-size: 12px; margin-top: 4px; }
.chartBody { border-radius: var(--radius-sm); overflow: hidden; }

/* Placeholder shimmer */
.chartPlaceholder { height: 220px; display: grid; align-content: center; gap: 10px; padding: 12px; }
.placeholderLine {
  height: 12px;
  border-radius: 999px;
  border: 1px solid var(--panel-border);
  background: linear-gradient(90deg, rgba(255,255,255,0.04), rgba(255,255,255,0.10), rgba(255,255,255,0.04));
  animation: shimmer 1.8s infinite linear;
  background-size: 200% 100%;
}
@keyframes shimmer { 0% { background-position: 0% 0%; } 100% { background-position: 200% 0%; } }

/* 4) Leaderboard – readable dark mode */
.leaderboard { padding: 12px; display: grid; gap: 12px; }
.leaderboardToolbar { display: grid; grid-template-columns: 1fr auto; gap: 12px; align-items: center; }

.input {
  width: 100%;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid var(--panel-border);
  background: rgba(255, 255, 255, 0.03);
  color: var(--text);
  outline: none;
  transition: border-color var(--dur) var(--ease), background var(--dur) var(--ease);
}
.input:focus { border-color: rgba(99, 102, 241, 0.45); background: rgba(99, 102, 241, 0.08); }

.segmented {
  display: inline-flex;
  border: 1px solid var(--panel-border);
  border-radius: 999px;
  overflow: hidden;
  background: rgba(255, 255, 255, 0.03);
}
.segBtn {
  border: none;
  background: transparent;
  color: var(--text2);
  padding: 10px 12px;
  cursor: pointer;
  transition: background var(--dur) var(--ease), color var(--dur) var(--ease);
}
.segBtn:hover { background: rgba(255,255,255,0.05); color: var(--text); }
.segBtn--active { background: rgba(99, 102, 241, 0.16); color: var(--text); }

.tableWrap { display: grid; gap: 2px; }
.row {
  display: grid;
  grid-template-columns: 64px 1.4fr repeat(5, 0.8fr);
  gap: 10px;
  align-items: center;
  padding: 10px 10px;
  border-radius: 14px;
}
.row--head { color: var(--tableHead); font-size: 12px; padding-top: 6px; padding-bottom: 6px; }
.row--item {
  text-align: left;
  border: 1px solid transparent;
  background: transparent;
  color: var(--text);
  cursor: pointer;
  transition: background var(--dur) var(--ease), border-color var(--dur) var(--ease);
}
.row--item:hover { border-color: rgba(255, 255, 255, 0.10); background: rgba(255, 255, 255, 0.03); }
:root[data-theme="light"] .row--item:hover { border-color: rgba(17,24,39,0.10); background: rgba(17,24,39,0.03); }

.cell { min-width: 0; }
.cell--rank { display: flex; align-items: center; justify-content: center; }
.cell--name { display: grid; gap: 2px; }
.nameMain { font-weight: 750; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; color: var(--text); }
.nameSub { color: var(--text2); font-size: 12px; }

.rankBadge {
  font-family: var(--font-mono);
  font-size: 12px;
  border-radius: 999px;
  padding: 6px 10px;
  border: 1px solid var(--panel-border);
  background: rgba(255,255,255,0.03);
  color: #e5e7eb;
}
:root[data-theme="light"] .rankBadge { color: rgba(11,16,32,0.78); }
.rankBadge--top { border-color: rgba(245, 158, 11, 0.35); background: rgba(245, 158, 11, 0.12); color: var(--text); }

.pill {
  display: inline-flex;
  border-radius: 999px;
  padding: 6px 10px;
  border: 1px solid var(--panel-border);
  font-size: 12px;
  color: #e5e7eb;
  background: rgba(255,255,255,0.02);
}
:root[data-theme="light"] .pill { color: rgba(11,16,32,0.72); background: rgba(17,24,39,0.02); }
.pill--ok { border-color: rgba(34,197,94,0.35); background: rgba(34,197,94,0.12); color: var(--text); }

.empty { padding: 18px 10px; color: var(--text2); text-align: center; }

/* Modal */
.modalOverlay { position: fixed; inset: 0; z-index: 200; display: grid; place-items: center; padding: 18px; }
.modalBackdrop { position: absolute; inset: 0; background: var(--overlay); border: none; }
.modal {
  position: relative;
  z-index: 1;
  width: min(980px, 100%);
  max-height: min(86vh, 860px);
  overflow: auto;
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-L5);
  padding: 14px;
}
.modalHeader { display: flex; justify-content: space-between; align-items: flex-start; gap: 12px; padding: 6px 6px 12px; }
.modalTitle { font-weight: 850; font-size: 18px; letter-spacing: -0.2px; }
.modalSub { color: var(--text2); font-size: 12px; margin-top: 4px; }
.modalBody { display: grid; gap: 14px; padding: 6px; }
.modalGrid { display: grid; gap: 14px; grid-template-columns: repeat(4, 1fr); }

@media (max-width: 980px) {
  .summaryGrid { grid-template-columns: repeat(2, 1fr); }
  .chartsGrid { grid-template-columns: 1fr; }
  .row { grid-template-columns: 56px 1.6fr repeat(3, 0.9fr); }
  .row--head .cell:nth-child(n+6),
  .row--item .cell:nth-child(n+6) { display: none; }
  .modalGrid { grid-template-columns: repeat(2, 1fr); }
  .topbar { grid-template-columns: 1fr auto; }
  .topnav { display: none; }
}

@media (max-width: 520px) {
  .content { width: calc(100% - 22px); }
  .bannerInner { padding: 22px 16px 16px; }
  .row { grid-template-columns: 50px 1.5fr 0.8fr 0.8fr; }
  .row--head .cell:nth-child(n+5),
  .row--item .cell:nth-child(n+5) { display: none; }
  .modalGrid { grid-template-columns: 1fr; }
}


/* === UI/UX patch: stronger glass + performance tweaks === */
.panel {
  border-radius: var(--radius-lg);
  backdrop-filter: blur(22px);
  -webkit-backdrop-filter: blur(22px);
  overflow: hidden;
  position: relative;
}

.panel::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: linear-gradient(
    135deg,
    rgba(255,255,255,0.18) 0%,
    rgba(255,255,255,0.06) 22%,
    rgba(255,255,255,0.00) 55%
  );
  opacity: 0.65;
}

.panel::after {
  content: "";
  position: absolute;
  inset: 1px;
  border-radius: calc(var(--radius-lg) - 1px);
  border: 1px solid rgba(255,255,255,0.08);
  pointer-events: none;
  opacity: 0.8;
}
:root[data-theme="light"] .panel::after { border-color: rgba(0,0,0,0.06); }

/* Lightweight rows: no blur */
.panel--row {
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
  box-shadow: var(--shadow-L1);
}
.panel--row::before,
.panel--row::after { opacity: 0.35; }

/* Leaderboard toolbar alignment + search width */
.leaderboardToolbar { display: flex; justify-content: flex-start; align-items: center; gap: 12px; }
.search { width: 280px; }
@media (max-width: 520px) { .search { width: 100%; } }

/* Performance hint for long lists */
.tableWrap { content-visibility: auto; contain-intrinsic-size: 800px; }

/* Theme + source toggles */
.themeToggle {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 8px 10px;
  border-radius: 999px;
  border: 1px solid var(--panel-border);
  background: var(--panel-2-bg);
  box-shadow: var(--shadow-L1);
  color: var(--text);
  cursor: pointer;
}
.themeToggleLabel { font-size: 13px; color: var(--text2); width: 64px; text-align: left; }
.themeToggleTrack {
  position: relative;
  width: 56px;
  height: 28px;
  border-radius: 999px;
  border: 1px solid var(--panel-border);
  background: rgba(0,0,0,0.18);
  overflow: hidden;
}
:root[data-theme="light"] .themeToggleTrack { background: rgba(255,255,255,0.55); }

.themeToggleThumb {
  position: absolute;
  top: 2px;
  left: 2px;
  width: 24px;
  height: 24px;
  border-radius: 999px;
  background: rgba(255,255,255,0.82);
  box-shadow: var(--shadow-L2);
  display: grid;
  place-items: center;
  transition: transform 160ms var(--ease);
  will-change: transform;
}
:root[data-theme="dark"] .themeToggleThumb { transform: translateX(28px); background: rgba(10,10,12,0.72); }

.iconSun, .iconMoon {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  transition: opacity 120ms var(--ease), transform 160ms var(--ease);
}
.iconSun { opacity: 1; transform: rotate(0deg) scale(1); }
.iconMoon { opacity: 0; transform: rotate(-20deg) scale(0.9); }
:root[data-theme="dark"] .iconSun { opacity: 0; transform: rotate(20deg) scale(0.9); }
:root[data-theme="dark"] .iconMoon { opacity: 1; transform: rotate(0deg) scale(1); }

.sourceToggle {
  display: inline-flex;
  gap: 4px;
  padding: 4px;
  border-radius: 999px;
  border: 1px solid var(--panel-border);
  background: var(--panel-2-bg);
  box-shadow: var(--shadow-L1);
}
.sourceBtn {
  padding: 8px 12px;
  border-radius: 999px;
  border: 0;
  background: transparent;
  color: var(--text2);
  font-size: 13px;
  cursor: pointer;
  transition: background var(--dur) var(--ease), color var(--dur) var(--ease), transform var(--dur) var(--ease);
}
.sourceBtn:hover { transform: translateY(-1px); }
.sourceBtn.active { background: rgba(255,255,255,0.22); color: var(--text); }
:root[data-theme="light"] .sourceBtn.active { background: rgba(0,0,0,0.08); }

@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; scroll-behavior: auto !important; }
}


/* === Glass tuning v2 (thinner borders, stronger "glass") === */
.panel {
  border-width: 1px;
  border-color: rgba(255,255,255,0.07);
  background: linear-gradient(
      180deg,
      rgba(255,255,255,0.06) 0%,
      rgba(255,255,255,0.035) 55%,
      rgba(255,255,255,0.02) 100%
    ),
    var(--panel-bg);
}

:root[data-theme="light"] .panel {
  border-color: rgba(17,24,39,0.10);
  background: linear-gradient(
      180deg,
      rgba(255,255,255,0.95) 0%,
      rgba(255,255,255,0.78) 60%,
      rgba(255,255,255,0.70) 100%
    ),
    var(--panel-bg);
}

/* specular highlight: softer + more "glass" */
.panel::before {
  background:
    radial-gradient(620px 280px at 18% 10%, rgba(255,255,255,0.20), transparent 60%),
    linear-gradient(135deg, rgba(255,255,255,0.16) 0%, rgba(255,255,255,0.05) 28%, rgba(255,255,255,0.00) 58%);
  opacity: 0.55;
}

/* inner border: thinner + less visible */
.panel::after {
  inset: 1px;
  border-width: 1px;
  border-color: rgba(255,255,255,0.05);
  opacity: 0.70;
}
:root[data-theme="light"] .panel::after { border-color: rgba(0,0,0,0.05); opacity: 0.65; }


/* === Toggles sizing consistency === */
.themeToggle,
.sourceToggle {
  height: 40px;
  padding: 4px;
  align-items: center;
}

/* Theme toggle: remove extra padding so it matches source toggle */
.themeToggle {
  gap: 8px;
  padding: 4px 8px;
}
.themeToggleLabel { width: 64px; }

/* Source toggle: animated thumb */
.sourceToggle {
  position: relative;
  overflow: hidden;
  gap: 0;
  padding: 4px;
}

.sourceToggle::before {
  content: "";
  position: absolute;
  top: 4px;
  bottom: 4px;
  left: 4px;
  width: calc(50% - 4px);
  border-radius: 999px;
  background: rgba(255,255,255,0.22);
  transform: translateX(var(--source-x, 0px));
  transition: transform 180ms var(--ease);
  will-change: transform;
  pointer-events: none;
}
:root[data-theme="light"] .sourceToggle::before { background: rgba(0,0,0,0.08); }

.sourceBtn {
  position: relative;
  z-index: 1;
  width: 72px;
  height: 32px;
  padding: 0;
  display: grid;
  place-items: center;
  font-weight: 650;
  letter-spacing: 0.2px;
}

.sourceBtn.active { background: transparent; } /* handled by thumb */


/* === Leaderboard typography + contrast === */
.row { font-size: 13.5px; }
.nameMain { font-weight: 700; }
.mono { font-size: 13px; font-variant-numeric: tabular-nums; }

/* Make rows slightly darker in dark mode to lift text */
:root[data-theme="dark"] .row--item {
  background: rgba(0,0,0,0.16);
  border-color: rgba(255,255,255,0.06);
}
:root[data-theme="dark"] .row--item:hover {
  background: rgba(0,0,0,0.22);
  border-color: rgba(255,255,255,0.10);
}

/* Pill: allow inline color scale to control border/background */
.pill { border-width: 1px; border-style: solid; }
